<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>CppDB: CppDB - ODBC bridge - &quot;odbc&quot;</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">CppDB
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="index.html">CppDB - SQL Connectivity Library</a>      </li>
      <li class="navelem"><a class="el" href="backendref.html">Backends Reference</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">CppDB - ODBC bridge - "odbc" </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>ODBC backend allows to connect to almost any existing SQL database via ODBC driver and provides much more convenient interface that ODBC C API.</p>
<p>Unlike other backends, this one is not loaded dynamically by default but rather linked directly to cppdb library.</p>
<h2><a class="anchor" id="conn"></a>
Connection String</h2>
<p>The driver name is "odbc", but the <a class="el" href="classcppdb_1_1session.html#a8f44a4906cfb35de1fcf8f069e967e95">cppdb::session::engine()</a> returns "unknown" unless "@engine" property is specified.</p>
<p>Connection Properties are passed as is into ODBC connection string, so for example for connecting to some database you may just simply specify:</p>
<div class="fragment"><pre class="fragment">
odbc:DSN=MySource;UID=myuser;PWD=secret
</pre></div><p>However there are several additional internal properties that define how cppdb treats the ODBC connection:</p>
<ul>
<li><code>@engine</code> - the type of underlying database engine, it allows the backend to customise the behavior and provide support for features missing in ODBC API itself. <br/>
 Currently following engine names provide additional values: "mysql", "sqlite3", "postgresql", "mssql". It allows the driver to support <a class="el" href="classcppdb_1_1statement.html#a9a9d33c6818cc2c621c4d2a751128f58">cppdb::statement::sequence_last()</a> or <a class="el" href="classcppdb_1_1statement.html#a74e9285b1b1ec809169b709b2ae5bf4f">cppdb::statement::last_insert_id()</a> functionality.</li>
<li><code>@utf</code> - with options "narrow" - the default and "wide". This option specifies how to deal with Unicode. If the "narrow" option is used (default) it would pass strings as is to the backend assuming that is supports UTF-8 natively using so called "ANSI" API , otherwise, it would use so called "Wide" API and convert the strings to UTF-16 and use wide character functions. <br/>
 <dl class="note"><dt><b>Note:</b></dt><dd>you should almost always use narrow option as most ODBC drivers support UTF-8 happily, however when you work with MS SQL under windows you would probably want to use wide API for operation on strings.</dd></dl>
</li>
<li><code>@sequence_last</code> - the SQL statement that is used for retrieving the last created id. You need to specify this if you want to use <a class="el" href="classcppdb_1_1statement.html#a9a9d33c6818cc2c621c4d2a751128f58">cppdb::statement::sequence_last()</a> or <a class="el" href="classcppdb_1_1statement.html#a74e9285b1b1ec809169b709b2ae5bf4f">cppdb::statement::last_insert_id()</a> and the engine is not one of mysql sqlite3, postgresql or mssql. <br/>
 If the statement contains "?" mark the parameter of <a class="el" href="classcppdb_1_1statement.html#a9a9d33c6818cc2c621c4d2a751128f58">cppdb::statement::sequence_last()</a> would be binded to it, otherwise the parameter is ignored.</li>
</ul>
<h2><a class="anchor" id="impl"></a>
Implementation Details</h2>
<p>Both prepared statements use SQLPrepare API and unprepared statements use SQLExecDirect API. All data is fetched using SQLGetData in order to support variable text length.</p>
<p>Following statements are used for fetching last insert id:</p>
<ul>
<li><code>sqlite3</code> - "select last_insert_rowid()"</li>
<li><code>mysql</code> - "select last_insert_id()"</li>
<li><code>postgresql</code> - "select currval(?)"</li>
<li><code>mssql</code> - "select @@identity"</li>
</ul>
<p>If the engine is not one of the above and "@sequence_last" property is not defined the <a class="el" href="classcppdb_1_1not__supported__by__backend.html" title="This operation is not supported by the backend.">cppdb::not_supported_by_backend</a> exception would be thrown.</p>
<p><a class="el" href="classcppdb_1_1session.html#a6ebdd4b572a87ed3b0a776ec91719f8e">cppdb::session::escape()</a> functionality is not supported as actual escaping rules vary by the specific RDBMS and attempt to use them would cause <a class="el" href="classcppdb_1_1not__supported__by__backend.html" title="This operation is not supported by the backend.">cppdb::not_supported_by_backend</a> exception. </p>
</div></div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Sat Jun 23 2012 12:36:59 for CppDB by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
