<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>CppDB: PostgreSQL Backend - &quot;postgresql&quot;</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">CppDB
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="index.html">CppDB - SQL Connectivity Library</a>      </li>
      <li class="navelem"><a class="el" href="backendref.html">Backends Reference</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">PostgreSQL Backend - "postgresql" </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>PostgreSQL backend allows to connect to PostgreSQL database. It uses libpq C client API.</p>
<h2><a class="anchor" id="conn"></a>
Connection String</h2>
<p>The driver name is "postgresql", <a class="el" href="classcppdb_1_1session.html#a8f44a4906cfb35de1fcf8f069e967e95">cppdb::session::engine()</a> returns "posgresql"</p>
<p>PostgreSQL connection properties are passed as it to libpq. So for full list you should refer to the <a href="http://www.postgresql.org/docs/8.3/static/libpq-connect.html">libpq manual</a></p>
<p>The most used properties are:</p>
<ul>
<li><code>host</code> - the remote database host to connect. Default is local host.</li>
<li><code>user</code> - the user name to login</li>
<li><code>password</code> - the password to login</li>
<li><code>dbname</code> - the name of the database to use - default unspecified</li>
<li><code>port</code> - the port to connect - default unspecified</li>
</ul>
<h3><a class="anchor" id="connspec"></a>
Special Properties</h3>
<p>PostgreSQL backend has additional internal property that define how to treat blob objects: "@blob"</p>
<p>The possible values are:</p>
<ul>
<li><code>lo</code> use large object API to store Blobs. This is the default.it adds a restriction to accessing large objects only withing transaction and handing their lifetime using <a href="http://www.postgresql.org/docs/8.3/static/lo.html">lo module</a>. This option has an advantage of small memory footprint when dealing with large objects as it does not require storing full object in memory.</li>
<li><code>bytea</code> - treat Blobs as bytea columns. This is simpler method but it is applicable only for objects that can fit to memory.</li>
</ul>
<h2><a class="anchor" id="impl"></a>
Implementation Details</h2>
<p>Prepared statements are implemented using PQexecPrepared API, while unprepared statements use PQexecParams API.</p>
<p>When using PostgreSQL large objects "@blob=lo" - the default - you should access them only during transaction, otherwise the operations would fail. It is very good idea to use <a href="http://www.postgresql.org/docs/8.3/static/lo.html">lo module</a> that helps handing object lifetime as cppdb backend is not aware of statement type you use and it can't decide whether new object should be created in insert statement or same object should be updated. So "lo" module is your friend.</p>
<p>You may also use bytea if want to have a semantics similar to other RDBMSs Blobs.</p>
<p>Fetching last insert id should be done using non-empty sequence name, i.e. using <a class="el" href="classcppdb_1_1statement.html#a9a9d33c6818cc2c621c4d2a751128f58">cppdb::statement::sequence_last()</a> and it is fetched using "SELECT currval(?)" statement. </p>
</div></div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Sat Jun 23 2012 12:36:59 for CppDB by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
