<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>CppDB: Connecting to Database</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">CppDB
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="index.html">CppDB - SQL Connectivity Library</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">Connecting to Database </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2><a class="anchor" id="cs"></a>
Connection Strings</h2>
<h3><a class="anchor" id="fmt"></a>
Connection String Format</h3>
<p>CppDB connection string consists of the following parts:</p>
<ol type="1">
<li>Driver Name separated from rest of the string with ":"</li>
<li>Set of key = value pairs separated with ";" symbol. Where value can be put in single quotation marks ' and double quotation mark represents a single one (like in SQL syntax).</li>
</ol>
<p>For example </p>
<div class="fragment"><pre class="fragment">
mysql:database=test;user=joe;password='d''eep secret'
</pre></div><p>Represent a driver "mysql", user "joe" and password "d'eep secret".</p>
<p>There are special keys that used as internal cppdb options rather then connection options. Such keys are always start with @ symbol. For example "@use_prepared=off".</p>
<h3><a class="anchor" id="speckeys"></a>
Special Options</h3>
<p>These are CppDB special key values that are used as meta data for the connection:</p>
<ul>
<li>@stmt_cache_size - integer - the maximal number of cached statements. Default is 64. <br/>
 Each time new statement is created it is stored back in cache for future reuse and thus next time when the statement is created it would be fetched from cache rather then being prepared again. It gives significant performance boost for query and statements execution. The cache is handled using LRU queue.</li>
<li>@use_prepared - "on" or "off" by default create prepared statements or ordinary statements. Default is "on".</li>
<li>@pool_size - integer - the size of connection pool. Default is 0 - no connection pooling. <br/>
 This provides connection pool for efficient connection reuse that significantly improves the performance.</li>
<li>@pool_max_idle - integer - the number if seconds to keep idle connection in pool. Default 600 - 10 minutes. <br/>
 This is useful for keeping maximal amount of time for holding an idle connection in pool.</li>
<li>@modules_path - string - the path to search cppdb modules (drivers) in. <br/>
 Several paths can be given, under POSIX platform they should be separated using ':' symbol and under Windows (not Cygwin) it should be ';' symbol. For example: <br/>
 <div class="fragment"><pre class="fragment">
mydriver:@modules_path=/opt/cppd/lib:/usr/local/lib;database=foo
mydriver:@modules_path='c:/cppdb/lib;c:/mydrv';database=foo
</pre></div></li>
<li>@module - string - the path to loadable cppdb module (shared object or dll). <br/>
 The explicit path to cppdb driver, for example "mydriver:@module=/opt/lib/libmy.so"</li>
</ul>
<h2><a class="anchor" id="Establishing"></a>
Connection</h2>
<p>Connecting to the database can be done using either by creating a session object with connection string parameter <a class="el" href="classcppdb_1_1session.html#a7ae75affbf1b2e809250a6e2ff36bf2c">cppdb::session::session(std::string const &amp;)</a> or by calling <a class="el" href="classcppdb_1_1session.html#a87bf19e274cfcc265fa9fbc40bd7c422">cppdb::session::open()</a> function.</p>
<p>When the connection established first time for specific driver, it loads its shared object or dll and makes it available for you. If you want to unload the drivers that are not used any more you should call <a class="el" href="classcppdb_1_1driver__manager.html#a8ce3ad6b590b506d533402444bb87e0e">cppdb::driver_manager::collect_unused()</a>. And if all drivers that do not have opened connections will be closed.</p>
<dl class="note"><dt><b>Note:</b></dt><dd>If you use connection pooling you would also want to call <a class="el" href="classcppdb_1_1connections__manager.html#a936939170aa3679376a58b1b62380be8">cppdb::connections_manager::gc()</a> to remove all sessions that were idle for long period of time.</dd></dl>
<p>Both classes <a class="el" href="classcppdb_1_1connections__manager.html" title="This class is the major gateway to new connections.">cppdb::connections_manager</a> and <a class="el" href="classcppdb_1_1driver__manager.html" title="this class is used to handle all drivers, loading them, unloading them etc.">cppdb::driver_manager</a> are singleton classes that used for connection management and pooling and in fact, <a class="el" href="classcppdb_1_1session.html#a87bf19e274cfcc265fa9fbc40bd7c422">cppdb::session::open()</a> just calls <a class="el" href="classcppdb_1_1connections__manager.html#a28a7cc331b5a4cc668078c280be37a22">cppdb::connections_manager::open()</a> to get the underlying <a class="el" href="classcppdb_1_1backend_1_1connection.html" title="this class represents connection to database">cppdb::backend::connection</a> object. </p>
</div></div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Sat Jun 23 2012 12:36:59 for CppDB by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
